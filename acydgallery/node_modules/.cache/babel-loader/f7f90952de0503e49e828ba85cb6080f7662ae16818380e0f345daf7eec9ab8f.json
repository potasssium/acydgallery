{"ast":null,"code":"/**\n * Authentication API Module\n * \n * This file contains functions for interacting with the backend authentication API.\n * These functions make HTTP requests to your backend server, which interacts with your MySQL database.\n */\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to get the stored token from either localStorage or sessionStorage\nconst getStoredToken = () => {\n  return localStorage.getItem('token') || sessionStorage.getItem('token');\n};\n\n// Helper function to get the stored user from either localStorage or sessionStorage\nconst getStoredUser = () => {\n  const userFromLocal = localStorage.getItem('user');\n  const userFromSession = sessionStorage.getItem('user');\n  return userFromLocal ? JSON.parse(userFromLocal) : userFromSession ? JSON.parse(userFromSession) : null;\n};\n\n// Helper function to check if token is expired\nconst isTokenExpired = token => {\n  if (!token) return true;\n  try {\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    return payload.exp < Date.now() / 1000;\n  } catch (error) {\n    return true;\n  }\n};\n\n// Refresh token if needed\nexport const refreshTokenIfNeeded = async () => {\n  const token = getStoredToken();\n  const user = getStoredUser();\n  if (!token || !user) return null;\n  if (isTokenExpired(token)) {\n    try {\n      // Make a request to the refresh token endpoint\n      const response = await fetch(`${API_URL}/auth/refresh`, {\n        method: 'POST',\n        credentials: 'include',\n        // Include cookies in the request\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Token refresh failed');\n      }\n      const data = await response.json();\n\n      // Update storage with the new token\n      if (localStorage.getItem('token')) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data));\n      } else {\n        sessionStorage.setItem('token', data.token);\n        sessionStorage.setItem('user', JSON.stringify(data));\n      }\n      return data;\n    } catch (error) {\n      console.error('Token refresh error:', error);\n      // If refresh fails, log the user out\n      logoutUser();\n      return null;\n    }\n  }\n  return user;\n};\n\n// Login a user\nexport const loginUser = async (email, password, rememberMe = false) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      // Include cookies in the request\n      body: JSON.stringify({\n        email,\n        password,\n        rememberMe\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Login failed');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Login error:', error);\n\n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock login data');\n\n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Simulate database lookup\n      if (email === 'demo@example.com' && password === 'Password123') {\n        return {\n          id: 1,\n          name: 'Demo User',\n          email: email,\n          isAuthenticated: true,\n          token: 'sample-jwt-token-would-be-here'\n        };\n      } else {\n        throw new Error('Invalid email or password');\n      }\n    }\n    throw error;\n  }\n};\n\n// Register a new user\nexport const registerUser = async (name, email, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      // Include cookies in the request\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Registration failed');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Registration error:', error);\n\n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock registration data');\n\n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      // Simulate database insertion\n      return {\n        id: Math.floor(Math.random() * 1000) + 1,\n        // Generate a random user ID\n        name: name,\n        email: email,\n        isAuthenticated: true,\n        token: 'sample-jwt-token-would-be-here'\n      };\n    }\n    throw error;\n  }\n};\n\n// Get user profile\nexport const getUserProfile = async userId => {\n  try {\n    // Check if token needs to be refreshed\n    await refreshTokenIfNeeded();\n    const token = getStoredToken();\n    const response = await fetch(`${API_URL}/users/${userId}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include' // Include cookies in the request\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Failed to fetch user profile');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Get profile error:', error);\n\n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock profile data');\n\n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 800));\n\n      // Simulate database query\n      return {\n        id: userId,\n        name: 'Demo User',\n        email: 'demo@example.com',\n        phone: '555-123-4567',\n        address: {\n          street: '123 Main St',\n          city: 'Anytown',\n          state: 'CA',\n          zip: '12345',\n          country: 'USA'\n        },\n        createdAt: '2023-01-15'\n      };\n    }\n    throw error;\n  }\n};\n\n// Update user profile\nexport const updateUserProfile = async (userId, userData) => {\n  try {\n    // Check if token needs to be refreshed\n    await refreshTokenIfNeeded();\n    const token = getStoredToken();\n    const response = await fetch(`${API_URL}/users/${userId}`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      // Include cookies in the request\n      body: JSON.stringify(userData)\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Failed to update user profile');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Update profile error:', error);\n\n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock update data');\n\n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1200));\n\n      // Simulate database update\n      return {\n        ...userData,\n        id: userId,\n        updatedAt: new Date().toISOString()\n      };\n    }\n    throw error;\n  }\n};\n\n// Get user orders\nexport const getUserOrders = async userId => {\n  try {\n    // Check if token needs to be refreshed\n    await refreshTokenIfNeeded();\n    const token = getStoredToken();\n    const response = await fetch(`${API_URL}/users/${userId}/orders`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include' // Include cookies in the request\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Failed to fetch orders');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Get orders error:', error);\n\n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock orders data');\n\n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Simulate database query\n      return [{\n        id: 'ORD-1234',\n        date: '2023-11-15',\n        total: 129.99,\n        status: 'Delivered',\n        items: [{\n          id: 1,\n          name: 'ACYD T-Shirt',\n          price: 49.99,\n          quantity: 1\n        }, {\n          id: 2,\n          name: 'ACYD Hoodie',\n          price: 79.99,\n          quantity: 1\n        }]\n      }, {\n        id: 'ORD-5678',\n        date: '2023-10-28',\n        total: 89.99,\n        status: 'Processing',\n        items: [{\n          id: 3,\n          name: 'ACYD Cap',\n          price: 29.99,\n          quantity: 1\n        }, {\n          id: 4,\n          name: 'ACYD Poster',\n          price: 19.99,\n          quantity: 3\n        }]\n      }];\n    }\n    throw error;\n  }\n};\n\n// Logout a user\nexport const logoutUser = async () => {\n  try {\n    // Call the logout endpoint to clear cookies\n    await fetch(`${API_URL}/auth/logout`, {\n      method: 'POST',\n      credentials: 'include' // Include cookies in the request\n    });\n\n    // Clear local storage and session storage\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    return {\n      success: true\n    };\n  } catch (error) {\n    console.error('Logout error:', error);\n    // Still remove storage even if there's an error\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    return {\n      success: true\n    };\n  }\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","getStoredToken","localStorage","getItem","sessionStorage","getStoredUser","userFromLocal","userFromSession","JSON","parse","isTokenExpired","token","payload","atob","split","exp","Date","now","error","refreshTokenIfNeeded","user","response","fetch","method","credentials","headers","ok","Error","data","json","setItem","stringify","console","logoutUser","loginUser","email","password","rememberMe","body","errorData","window","location","hostname","includes","message","log","Promise","resolve","setTimeout","id","name","isAuthenticated","registerUser","Math","floor","random","getUserProfile","userId","phone","address","street","city","state","zip","country","createdAt","updateUserProfile","userData","updatedAt","toISOString","getUserOrders","date","total","status","items","price","quantity","removeItem","success"],"sources":["/home/kay/Documents/acydgallery/acydgallery/src/api/authAPI.js"],"sourcesContent":["/**\n * Authentication API Module\n * \n * This file contains functions for interacting with the backend authentication API.\n * These functions make HTTP requests to your backend server, which interacts with your MySQL database.\n */\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to get the stored token from either localStorage or sessionStorage\nconst getStoredToken = () => {\n  return localStorage.getItem('token') || sessionStorage.getItem('token');\n};\n\n// Helper function to get the stored user from either localStorage or sessionStorage\nconst getStoredUser = () => {\n  const userFromLocal = localStorage.getItem('user');\n  const userFromSession = sessionStorage.getItem('user');\n  return userFromLocal ? JSON.parse(userFromLocal) : userFromSession ? JSON.parse(userFromSession) : null;\n};\n\n// Helper function to check if token is expired\nconst isTokenExpired = (token) => {\n  if (!token) return true;\n  \n  try {\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    return payload.exp < Date.now() / 1000;\n  } catch (error) {\n    return true;\n  }\n};\n\n// Refresh token if needed\nexport const refreshTokenIfNeeded = async () => {\n  const token = getStoredToken();\n  const user = getStoredUser();\n  \n  if (!token || !user) return null;\n  \n  if (isTokenExpired(token)) {\n    try {\n      // Make a request to the refresh token endpoint\n      const response = await fetch(`${API_URL}/auth/refresh`, {\n        method: 'POST',\n        credentials: 'include', // Include cookies in the request\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Token refresh failed');\n      }\n      \n      const data = await response.json();\n      \n      // Update storage with the new token\n      if (localStorage.getItem('token')) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data));\n      } else {\n        sessionStorage.setItem('token', data.token);\n        sessionStorage.setItem('user', JSON.stringify(data));\n      }\n      \n      return data;\n    } catch (error) {\n      console.error('Token refresh error:', error);\n      // If refresh fails, log the user out\n      logoutUser();\n      return null;\n    }\n  }\n  \n  return user;\n};\n\n// Login a user\nexport const loginUser = async (email, password, rememberMe = false) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include', // Include cookies in the request\n      body: JSON.stringify({ email, password, rememberMe }),\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Login failed');\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Login error:', error);\n    \n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock login data');\n      \n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Simulate database lookup\n      if (email === 'demo@example.com' && password === 'Password123') {\n        return {\n          id: 1,\n          name: 'Demo User',\n          email: email,\n          isAuthenticated: true,\n          token: 'sample-jwt-token-would-be-here'\n        };\n      } else {\n        throw new Error('Invalid email or password');\n      }\n    }\n    \n    throw error;\n  }\n};\n\n// Register a new user\nexport const registerUser = async (name, email, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include', // Include cookies in the request\n      body: JSON.stringify({ name, email, password }),\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Registration failed');\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Registration error:', error);\n    \n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock registration data');\n      \n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      // Simulate database insertion\n      return {\n        id: Math.floor(Math.random() * 1000) + 1, // Generate a random user ID\n        name: name,\n        email: email,\n        isAuthenticated: true,\n        token: 'sample-jwt-token-would-be-here'\n      };\n    }\n    \n    throw error;\n  }\n};\n\n// Get user profile\nexport const getUserProfile = async (userId) => {\n  try {\n    // Check if token needs to be refreshed\n    await refreshTokenIfNeeded();\n    \n    const token = getStoredToken();\n    const response = await fetch(`${API_URL}/users/${userId}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include', // Include cookies in the request\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Failed to fetch user profile');\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Get profile error:', error);\n    \n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock profile data');\n      \n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 800));\n      \n      // Simulate database query\n      return {\n        id: userId,\n        name: 'Demo User',\n        email: 'demo@example.com',\n        phone: '555-123-4567',\n        address: {\n          street: '123 Main St',\n          city: 'Anytown',\n          state: 'CA',\n          zip: '12345',\n          country: 'USA'\n        },\n        createdAt: '2023-01-15'\n      };\n    }\n    \n    throw error;\n  }\n};\n\n// Update user profile\nexport const updateUserProfile = async (userId, userData) => {\n  try {\n    // Check if token needs to be refreshed\n    await refreshTokenIfNeeded();\n    \n    const token = getStoredToken();\n    const response = await fetch(`${API_URL}/users/${userId}`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include', // Include cookies in the request\n      body: JSON.stringify(userData),\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Failed to update user profile');\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Update profile error:', error);\n    \n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock update data');\n      \n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1200));\n      \n      // Simulate database update\n      return {\n        ...userData,\n        id: userId,\n        updatedAt: new Date().toISOString()\n      };\n    }\n    \n    throw error;\n  }\n};\n\n// Get user orders\nexport const getUserOrders = async (userId) => {\n  try {\n    // Check if token needs to be refreshed\n    await refreshTokenIfNeeded();\n    \n    const token = getStoredToken();\n    const response = await fetch(`${API_URL}/users/${userId}/orders`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include', // Include cookies in the request\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Failed to fetch orders');\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Get orders error:', error);\n    \n    // For demo purposes, if the server is not running, use the mock data\n    if (!window.location.hostname.includes('localhost') || error.message.includes('Failed to fetch')) {\n      console.log('Using mock orders data');\n      \n      // Simulate network delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Simulate database query\n      return [\n        {\n          id: 'ORD-1234',\n          date: '2023-11-15',\n          total: 129.99,\n          status: 'Delivered',\n          items: [\n            { id: 1, name: 'ACYD T-Shirt', price: 49.99, quantity: 1 },\n            { id: 2, name: 'ACYD Hoodie', price: 79.99, quantity: 1 }\n          ]\n        },\n        {\n          id: 'ORD-5678',\n          date: '2023-10-28',\n          total: 89.99,\n          status: 'Processing',\n          items: [\n            { id: 3, name: 'ACYD Cap', price: 29.99, quantity: 1 },\n            { id: 4, name: 'ACYD Poster', price: 19.99, quantity: 3 }\n          ]\n        }\n      ];\n    }\n    \n    throw error;\n  }\n};\n\n// Logout a user\nexport const logoutUser = async () => {\n  try {\n    // Call the logout endpoint to clear cookies\n    await fetch(`${API_URL}/auth/logout`, {\n      method: 'POST',\n      credentials: 'include', // Include cookies in the request\n    });\n    \n    // Clear local storage and session storage\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    \n    return { success: true };\n  } catch (error) {\n    console.error('Logout error:', error);\n    // Still remove storage even if there's an error\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    return { success: true };\n  }\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}